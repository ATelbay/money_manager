{
  "project": "MoneyManager",
  "branchName": "ralph/fix-bottomsheet-roborazzi",
  "description": "Fix CategoryBottomSheet transparent background and add Roborazzi screenshot tests",
  "userStories": [
    {
      "id": "US-001",
      "title": "Fix CategoryBottomSheet transparent background",
      "description": "As a user, I want the category bottom sheet to have a solid background so that content behind it is not visible through the sheet.",
      "acceptanceCriteria": [
        "ModalBottomSheet в CategoryBottomSheet использует solid containerColor вместо Color.Transparent",
        "Убрать ручной Column с background() внутри sheet — цвет задаётся через containerColor самого ModalBottomSheet",
        "Фон корректно отображается в dark theme (SurfaceDark) и light theme (SurfaceLight)",
        "./gradlew assembleDebug passes"
      ],
      "priority": 1,
      "passes": true,
      "notes": "File: presentation/transactions/src/main/java/com/atelbay/money_manager/presentation/transactions/ui/edit/TransactionEditScreen.kt. CategoryBottomSheet composable (line ~456). Currently containerColor = Color.Transparent with a manual Column background wrapper inside. Replace with containerColor = SurfaceDark/SurfaceLight or MaterialTheme.colorScheme.surface and remove the inner Column wrapper."
    },
    {
      "id": "US-002",
      "title": "Fix existing FAB Roborazzi test",
      "description": "As a developer, I want the existing FAB screenshot test to run without @Ignore so that CI catches visual regressions.",
      "acceptanceCriteria": [
        "Удалить @Ignore аннотацию из MoneyManagerFABScreenshotTest",
        "Удалить неиспользуемый import org.junit.Ignore",
        "Тест captureFloatingActionButton проходит при запуске ./gradlew :app:recordRoborazziDebug",
        "./gradlew :app:testDebugUnitTest passes"
      ],
      "priority": 2,
      "passes": true,
      "notes": "File: app/src/test/kotlin/com/atelbay/money_manager/MoneyManagerFABScreenshotTest.kt. Test already passes in debug — just remove @Ignore and the unused import."
    },
    {
      "id": "US-003",
      "title": "Add Roborazzi screenshot tests for CategoryBottomSheet",
      "description": "As a developer, I want screenshot tests for CategoryBottomSheet to catch visual regressions in the category selection UI.",
      "acceptanceCriteria": [
        "Тест для CategoryBottomSheet с пустым списком категорий (TransactionEditScreen с state.showCategorySheet=true, categories=empty)",
        "Тест для CategoryBottomSheet с категориями (3+ штуки) без выбранной",
        "Тест для CategoryBottomSheet с выбранной категорией (selectedCategory != null)",
        "Все тесты используют @RunWith(RobolectricTestRunner::class), @GraphicsMode(NATIVE), @Config(sdk=[33], qualifiers=\"xxhdpi\")",
        "Тесты оборачивают composable в MoneyManagerTheme(dynamicColor = false)",
        "Скриншоты сохраняются в app/src/test/screenshots/ с описательными именами",
        "./gradlew :app:recordRoborazziDebug passes",
        "./gradlew :app:testDebugUnitTest passes"
      ],
      "priority": 3,
      "passes": true,
      "notes": "CategoryBottomSheet is private — render TransactionEditScreen with TransactionEditState(isLoading=false, showCategorySheet=true, categories=testCategories). Use Category model from core:model. See MoneyManagerFABScreenshotTest for setup pattern. Screenshot names: category_sheet_empty.png, category_sheet_with_items.png, category_sheet_selected.png"
    },
    {
      "id": "US-004",
      "title": "Add Roborazzi screenshot test for TransactionEditScreen",
      "description": "As a developer, I want a baseline screenshot test for the transaction edit screen to catch layout regressions.",
      "acceptanceCriteria": [
        "Тест для TransactionEditScreen в состоянии 'новая транзакция' (пустая форма, isLoading=false)",
        "Тест для TransactionEditScreen с заполненными полями (amount, selectedCategory, note)",
        "Тесты используют @RunWith(RobolectricTestRunner::class), @GraphicsMode(NATIVE), @Config(sdk=[33], qualifiers=\"xxhdpi\")",
        "Скриншоты сохраняются в app/src/test/screenshots/ с описательными именами",
        "./gradlew :app:recordRoborazziDebug passes",
        "./gradlew :app:testDebugUnitTest passes"
      ],
      "priority": 4,
      "passes": true,
      "notes": "TransactionEditScreen is a stateless composable accepting TransactionEditState + lambdas. Render with empty lambdas ({}). Screenshot names: transaction_edit_empty.png, transaction_edit_filled.png"
    }
  ]
}
